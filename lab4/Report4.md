University: ITMO University
Faculty: FICT
Course: Network programming
Year: 2022/2023
Group: K34202
Author: Anisimova Rsenia
Lab: 4
Date of create: 15.12.2022
Date of finished: 24.12.2022

# Лабораторная работа №4 "Базовая 'коммутация' и туннелирование используя язык программирования P4"
### Описание
В данной лабораторной работе ознакомлены на практике с языком программирования P4, разработанный компанией Barefoot (ныне Intel) для организации процесса обработки сетевого трафика на скорости чипа. Barefoot разработал несколько FPGA чипов для обработки трафика которые были встроенны в некоторые модели коммутаторов Arista и Brocade.

### Цель работы
Изучить синтаксис языка программирования P4 и выполнить 2 задания обучающих задания от Open network foundation для ознакомления на практике с P4.

### Ход работы
1. Был склонирован репозиторий https://github.com/p4lang/tutorials и создана виртуальная машина с помощью команды vagrant up.
2. Был выполнен вход под учетной записью p4/p4. В shell была выполнена команда make run, а затем проверена доступность узлов.
3. Были внесены изменения в файл basic.p4:
    * Был обновлен парсер, который позволяет заполнять заголовки ethernet_t, ipv4_t.
    * Было дополнено action ip4_forward: был определен выходной порт, обновлен адрес назначения пакета, обновлен источник отправления пакета, уменьшено значение TTL.
    * Обеспечено применение ipv4_lpm, если заголовок ipv4 валидный.
4. Была выполнена проверка скрипта.
5. Был изменен файл basic_tunnel.p4:
    * Был обновлен парсер myParser, а именно, добавлена функция заполненения заголовка myTunnel.
    * Определено действие myTunnel_forward, которое назначает выходной порт.
    * Определена таблица myTunnel_exact.
    * Обновлено выражение apply, которое позволяет применять myTunnel_exact, если заголовок myTunell валидный.
    * Был обновлен MyDeparser
6. Была проверена локальная связность.
7. Была выполнена проверка скрипта, с h1 был оправлен пакет на h2 без туннелирования.
8. Был отправлен пакет с h1 на h2 с туннелированием.

### Выводы
Таким образом, был изучен язык P4, который позволяет настраивать сетевое оборудование, были дополнены скрипты, которые позволяют корректно обрабатывать трафик и организовывать туннели.
